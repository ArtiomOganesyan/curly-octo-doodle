## Тестовое задание должен содержать рабочий сервис.

Разработать сервис который позволяет произвести пополнение счета пользователя и производить перевод средств между счетами.

## Оформление результата

- Проект должен быть в git репозитории.
- Основной сервис необходимо завернуть в Docker
- Все тестовое задание с зависимыми сервисами необходимо завернуть в docker-compose.
- README.md - с описание запуска сервиса и зависимых сервисов.

По результатам тестового ожидаем ссылку на git репозиторий.

## Описание

У **пользователя** есть **счёт** в системе.
Его можно **пополнить** или **перевести** n сумму на счет другого пользователя.

Пополение счета может происходит из внешней системе (стороннюю 
платежный сервис). Пользователь в сторонней системе выбирает удобный 
способ и в случае успеха, сторонняя система вызывает webhook нашего 
сервиса (стороннюю платежную систему - реализовывать не нужно).

## Требования к сервису

### Стэк:

- NodeJS (Latest LTS), NestJS, TypeScript.

Остальное на выбор кандидата.

### Архитектура:

- Учитывать горизонтальное масштабирование сервиса.
- Идемпотентность запросов

### Сущности

Предложенные сущности могут быть расширены на усмотрение кандидата:

- **Пользователь**.
- **Счет**.
- И **транзкции,** которые должны отражать все действия со счетом. (поплнение или переводы).

**Пользователь** - можно хранить необходимый минимум данных для этого (id, email).

**Счет** - должен содержать в себе текущее количество денег на счету пользователя. У пользователя может быть только один счет.

**Транзакции** - должны содержать информацию о типе операции над счетом (пополнение, перевод на другой счет) и сумме операции.

``` 
{
    "accountFrom": "",
    "accountTo": "",
    "type": "transfer",
    "amount": 100
}
 ```

- *accountFrom* - С какого счета. В случае пополнения счета пользователя 
- *accountFrom* можно не указывать.
- *accountTo* - На какой счет зачисление.
- *type* - тип операциии над счетом.
    - *transfer* - перевод с одного счета на другой
    - *refill* - пополнение счета из сторонней системы.

Важно обеспечить согласованность данных при работе со счетам и транзкциями пользователя.

### Endpoints

### POST /accounts/payment

Пополнени счета пользователя для сторонних систем.

Важно учитывать, платежная система может сделать два паралельных запроса на пополнение счета пользователя с одинаковым *paymentId* и зачисление по одному *paymentId* может быть только один раз.

**Body** запроса

```
{
    "paymentId": "4pFqNT16QWjR",
    "email": "user-example",
    "amount": 100,
}
```

- *paymentId* - рандомная строка от платежной системы. Можно
использовать для реализации идемпотентности. Нельзя пополнить счет два
раза с одним и тем же *paymentId*.
- *email* - почта пользователя в нашей системе
- *amount* - сумма пополнения

### POST /accounts/transfer

Перевод суммы с одного счета на другой

Важно учитывать, что пользователь не может уходить в минус.

**Body** запроса

```
{
    "userFrom": "user-id",
    "userTo": "user-id",
    "amount": 200
}
```

- *userFrom* - id пользователя со счета которого будет списание средств
- *userTo* - id пользователя на счет которого будут зачислены средства
- *amount* - количество суммы перевода